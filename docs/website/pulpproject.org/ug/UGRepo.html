<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="../css/pulp-ug.css" />
  <link rel="shortcut icon" href="../favicon.ico" />
  <title>Pulp User Guide</title>
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20330081-1']);
      _gaq.push(['_trackPageview']);

  (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script> 
</head>
<body>

<div id="header">
<a href="/">
<div id="logo">
<h1 class="invisible">Pulp</h1>
</div>
</a>
</div>
<!-- END HEADER -->


<div id="content" class="wiki"><div id="wikipage"><h1 id="Repositories">Repositories</h1>
<p>
In Pulp, a repository (or <em>repo</em> for short) is a collection of packages, errata, and distributions. The packages can be synchronized into Pulp from an external <em>feed</em> (yum, RHN, etc.) or manually uploaded and maintained by a Pulp admin. For feed-based repositories, the repo can be configured to keep itself updated from the source at scheduled intervals.
</p>
<p>
Through Pulp, clients (or <em>consumers</em> in Pulp terminology) are <em>bound</em> to a repository, enabling them to retrieve that repository's content. This binding is covered in the <a class="wiki" href="UGConsumers.html#bind">Consumer Bind</a> section of the user guide.
</p>
<p>
The <tt>pulp-admin</tt> script provides ways to manipulate repositories in Pulp. The following sections describe the repository-related features that are provided.
</p>
<hr />
<h2 id="crud">Creation, Update, Removal, Display</h2>
<h3 id="Creation">Creation</h3>
<p>
The first step when working with repositories is to create one. Repository creation is done through the <tt>repo create</tt> command in the <tt>pulp-admin</tt> script. For example, to create a repository that will synchronize packages from the Pulp Fedora 14 x86_64 repository, the following command would be used:
</p>
<pre class="wiki">$ pulp-admin repo create --id example --feed http://repos.fedorapeople.org/repos/pulp/pulp/fedora-14/x86_64
Successfully created repository [ example ]
</pre><p>
The following attributes can be specified at repo creation time (all attributes are optional unless otherwise specified).
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Required. Uniquely identifies the repository within the Pulp server. This ID is used when calling operations on a repo. 
</td></tr><tr><td> Name </td><td> <tt>--name</tt> </td><td> Display name used to better describe the content and purpose of the repo. 
</td></tr><tr><td> Architecture </td><td> <tt>--arch</tt> </td><td> Indicates the architecture of packages that will be found in the repo. 
</td></tr><tr><td> Feed </td><td> <tt>--feed</tt> </td><td> Indicates where packages should be synchronized from when populating the repo. See the section below on feeds for more information. 
</td></tr><tr><td> Feed CA Certificate </td><td> <tt>--feed_ca</tt> </td><td> If the feed uses an HTTPS connection, this indicates the CA certificate used to verify the server's SSL certificate. The certificate will be uploaded to the Pulp server and used when synchronizing the repository. 
</td></tr><tr><td> Feed Entitlement Certificate </td><td> <tt>--feed_cert</tt> </td><td> If the feed uses an HTTPS connection and requires an entitlement certificate for authentication, this indicates the certificate to use. The certificate will be uploaded to the Pulp server and used when synchronizing the repository.  The file may contain both the private key as well as the certificate in which case the --feed_key should not be specified. 
</td></tr><tr><td> Feed Entitlement Private Key </td><td> <tt>--feed_key</tt> </td><td> When using an entitlement certificate, this indicates the certificate's associated private key. 
</td></tr><tr><td> Consumer CA Certificate </td><td> <tt>--consumer_ca</tt> </td><td> Full path to the CA certificate used to verify consumer certificates for protected repositories. Specifying this will flag the repository as protected. See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> for more information. 
</td></tr><tr><td> Consumer Entitlement Certificate </td><td> <tt>--consumer_cert</tt> </td><td> Full path to the certificate bound consumers will receive that will grant access to this repository.  The file may contain both the private key as well as the certificate in which case the --consumer_key should not be specified.  See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> for more information. 
</td></tr><tr><td> Consumer Entitlement Private Key </td><td> <tt>--consumer_key</tt> </td><td>  Full path to file containing the certificate's associated private key.  See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> for more information. 
</td></tr><tr><td> Relative Path </td><td> <tt>--relativepath</tt> </td><td> Relative path at which the repository will be served. If this is not specified, the repo will default to being served at the same path as found in the feed. 
</td></tr><tr><td> Group ID </td><td> <tt>--groupid</tt> </td><td> Tags the repository as part of a repo group. The group does not need to be explicitly created ahead of time; simply putting a repository in a group using this attribute is the only step necessary. 
</td></tr><tr><td> GPG Keys </td><td> <tt>--gpgkeys</tt> </td><td> A comma-separated list of GPG public key files that can be used to verify the packages found within the repository. 
</td></tr><tr><td> Checksum Type </td><td> <tt>--checksum_type</tt> </td><td> checksum type to use when yum metadata is generated 
</td></tr><tr><td> Preserve Metadata </td><td> <tt>--preserve_metadata</tt> </td><td> Preserves the original metadata; only works with feed repos 
</td></tr><tr><td> Content Type </td><td> <tt>--content_type</tt> </td><td> content type allowed in this repository; default:yum; supported: [yum, file] 
</td></tr><tr><td> Packages Dir </td><td> <tt>--packages_dir</tt> </td><td> Directory location where the package is symlinked under the repo directory for feedless repos; for feed repos this is directly set from the source metadata 
</td></tr></table>
<h4 id="Feeds">Feeds</h4>
<p>
The feed URL is just a valid url string. Supported protocols include 'http','https', 'ftp' or 'file' when creating the repository. For example:
</p>
<pre class="wiki">$ pulp-admin repo create --id example --feed=https://example.com/repos
$ pulp-admin repo create --id example --feed=file:///mount/data/f14/repos
</pre><h4 id="RelativePath">Relative Path</h4>
<p>
A repository's relative path cannot place the repository as a child of another repository. This applies both in the case where the relative path is determined from the feed URL and when it is explicitly set using the <tt>--relativepath</tt> argument. For example, serving a repository at <tt>foo/bar</tt> and another at <tt>foo/bar/baz</tt> is invalid. Serving multiple repositories in a non-repository parent is valid, for instance <tt>rhel5/i386</tt> and <tt>rhel5/x86_64</tt>.
</p>
<h3 id="Update">Update</h3>
<p>
A repository may be updated after it has been created through the <tt>repo update</tt> command in the <tt>pulp-admin</tt> script. For example, to update a repository so it will synchronize packages from the Pulp Fedora 14 i386 repository instead of the x86_84 repository, the following command would be used:
</p>
<pre class="wiki">$ pulp-admin repo update --id example --feed http://repos.fedorapeople.org/repos/pulp/pulp/fedora-14/i386 --arch i386
Successfully updated repository [ example ]
</pre><p>
The following attributes can be updated (all attributes are optional unless otherwise specified).
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Required. Identifies the repository to be updated. 
</td></tr><tr><td> Name </td><td> <tt>--name</tt> </td><td> Change the display name which is used to better describe the content and purpose of the repo. 
</td></tr><tr><td> Architecture </td><td> <tt>--arch</tt> </td><td> Change the architecture of packages that will be found in the repo. 
</td></tr><tr><td> Feed </td><td> <tt>--feed</tt> </td><td> Change where packages should be synchronized from when populating the repo. 
</td></tr><tr><td> Feed CA Certificate </td><td> <tt>--feed_ca</tt> </td><td> If the feed uses an HTTPS connection, this indicates the CA certificate used to verify the server's SSL certificate. The certificate will be uploaded to the Pulp server and used when synchronizing the repository. 
</td></tr><tr><td> Feed Entitlement Certificate </td><td> <tt>--feed_cert</tt> </td><td> If the feed uses an HTTPS connection and requires an entitlement certificate for authentication, this indicates the certificate to use. The certificate will be uploaded to the Pulp server and used when synchronizing the repository.  The file may contain both the private key as well as the certificate in which case the --feed_key is not necessary. 
</td></tr><tr><td> Feed Entitlement Private Key </td><td> <tt>--feed_key</tt> </td><td> When using an entitlement certificate, this indicates the certificate's associated private key. 
</td></tr><tr><td> Remove Feed Entitlement Certificate </td><td> <tt>--remove_feed_cert</tt> </td><td> Removes any feed HTTPS data, including the CA certificate, entitlement certificate and its private key. This cannot be specified at the same time as any of the <tt>--feed_*</tt> attributes. 
</td></tr><tr><td> Consumer CA Certificate </td><td> <tt>--consumer_ca</tt> </td><td> Full path to the CA certificate used to verify consumer certificates for protected repositories. Specifying this will flag the repository as protected. See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> for more information. 
</td></tr><tr><td> Consumer Entitlement Certificate </td><td> <tt>--consumer_cert</tt> </td><td> Full path to the certificate bound consumers will receive that will grant access to this repository.  The file may contain both the private key as well as the certificate in which case the --consumer_key should not be specified.  See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> for more information. 
</td></tr><tr><td> Consumer Entitlement Private Key </td><td> <tt>--consumer_key</tt> </td><td>  Full path to file containing the certificate's associated private key.  See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> for more information. 
</td></tr><tr><td> Remove Consumer Entitlement Certificate </td><td> <tt>--remove_consumer_cert</tt> </td><td> Disabled repository authentication from the repository. For more information, see <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a>. 
</td></tr><tr><td> Relative Path </td><td> <tt>--relativepath</tt> </td><td> Change the relative path at which the repository will be served. If this is not specified, the repo will default to being served at the same path as found in the feed. 
</td></tr><tr><td> Group ID </td><td> <tt>--groupid</tt> </td><td> Tags the repository as part of a repo group. The group does not need to be explicitly created ahead of time; simply putting a repository in a group using this attribute is the only step necessary. 
</td></tr><tr><td> Add GPG keys </td><td> <tt>--addkeys</tt> </td><td> A comma-separated list of GPG public key files to be added. 
</td></tr><tr><td> Remove GPG keys </td><td> <tt>--rmkeys</tt> </td><td> A comma-separated list of GPG public key files to be removed. 
</td></tr><tr><td> Checksum Type </td><td> <tt>--checksum_type</tt> </td><td> checksum type to use when yum metadata is generated 
</td></tr><tr><td> Packages Dir </td><td> <tt>--packages_dir</tt> </td><td> Directory location where the package is symlinked under the repo directory for feedless repos; for feed repos this is directly set from the source metadata 
</td></tr></table>
<h3 id="Removal">Removal</h3>
<p>
Removing a repository from Pulp is as simple as running the <tt>repo delete</tt> command.
</p>
<pre class="wiki">$ pulp-admin repo delete --id example
</pre><h3 id="Display">Display</h3>
<p>
There are a number of different views into a repository's contents.
</p>
<h4 id="RepositoryList">Repository List</h4>
<p>
The list of all repositories in the Pulp server can be retrieved with the <tt>repo list</tt> command.
</p>
<pre class="wiki">$ pulp-admin repo list
+------------------------------------------+
       List of Available Repositories
+------------------------------------------+

Id              	example                  
Name               	example                  
FeedURL            	http://example.com/repos 
FeedType           	yum                      
Arch               	noarch                   
Sync Schedule      	None                     
Packages           	0                        
Files              	0                        
Distributions      	None                     
Publish            	True                     
Clones             	[]                       
Groups             	None
</pre><p>
The following fields are displayed for each repository:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> Unique identifier for the repository; used throughout the Pulp interfaces when referring to the repo. 
</td></tr><tr><td> Name </td><td> User-friendly, descriptive name of the repository. 
</td></tr><tr><td> Repo URL </td><td> URL of where the repository is hosted on the Pulp server 
</td></tr><tr><td> Feed URL </td><td> URL of the feed from which this the contents of this repository will be synchronized. 
</td></tr><tr><td> Feed Type </td><td> Identifies the synchronization scheme used when downloading content from the feed. 
</td></tr><tr><td> Content Type </td><td> Identifies the content type of the repository,  yum or file. 
</td></tr><tr><td> Feed Certs </td><td> Indicates whether certificates are used for the repository feed. 
</td></tr><tr><td> Consumer Certs </td><td> Indicates whether certificates are used for consumer access. 
</td></tr><tr><td> Architecture </td><td> Describes the architecture of packages found within the repository. 
</td></tr><tr><td> Synchronization Schedule </td><td> Cron syntax describing when (if at all) the repository will automatically be synchronized. 
</td></tr><tr><td> Packages </td><td> Number of packages in the repository. 
</td></tr><tr><td> Files </td><td> Number of non-package files in the repository. 
</td></tr><tr><td> Distributions </td><td> Displays the name of all distributions that are present in the repository. 
</td></tr><tr><td> Publish </td><td> Indicates if the repository is being served by Pulp. If this is "False", the repository content exists in the Pulp server but is not accessible to consumers. 
</td></tr><tr><td> Clones </td><td> List of repository IDs of repos cloned from the repo being displayed. 
</td></tr><tr><td> Groups </td><td> A list of groups to which the repository belongs. 
</td></tr><tr><td> Filters </td><td> A list of filters that are associated with this repository. 
</td></tr><tr><td> Notes </td><td> A dictionary of additional key-value information about repository. 
</td></tr><tr><td> Preserve Metadata </td><td> Indicates whether metadata is regenerated during repository synchronization. 
</td></tr><tr><td> Checksum Type </td><td> Identifies the checksum type in the yum metadata for the repository. 
</td></tr></table>
<p>
You can also query repositories based on certain supported filtering parameters like group id, notes.
</p>
<pre class="wiki">$ sudo pulp-admin repo list --note test-key:test-value
+------------------------------------------+
       List of Available Repositories
+------------------------------------------+

Id                  test-repo2               
Name                test-repo2               
Feed URL            None                     
Feed Type           None                     
Content Type        yum                      
Feed Certs          CA:No   Cert:No
Consumer Certs      CA:No   Cert:No
Architecture        noarch                   
Sync Schedule       None                     
Packages            0                        
Files               0                        
Distributions       None                     
Publish             True                     
Clones              []                       
Groups              ['test-grp']             
Filters             []                       
Notes               {'test-key': 'test-value'}


Id                  test-repo1               
Name                test-repo1               
Feed URL            None                     
Feed Type           None                     
Content Type        yum                      
Feed Certs          CA:No   Cert:No
Consumer Certs      CA:No   Cert:No
Architecture        noarch                   
Sync Schedule       None                     
Packages            0                        
Files               0                        
Distributions       None                     
Publish             True                     
Clones              []                       
Groups              None                     
Filters             []                       
Notes               {'test-key': 'test-value'}
</pre><p>
You can also combine multiple query parametes:
</p>
<pre class="wiki">$ sudo pulp-admin repo list --note test-key:test-value --groupid=test-grp
+------------------------------------------+
       List of Available Repositories
+------------------------------------------+

Id                  test-repo2               
Name                test-repo2               
Feed URL            None                     
Feed Type           None                     
Content Type        yum                      
Feed Certs          CA:No   Cert:No
Consumer Certs      CA:No   Cert:No
Architecture        noarch                   
Sync Schedule       None                     
Packages            0                        
Files               0                        
Distributions       None                     
Publish             True                     
Clones              []                       
Groups              ['test-grp']             
Filters             []                       
Notes               {'test-key': 'test-value'}
</pre><h4 id="Status">Status</h4>
<p>
Synchronization status information can be found for an individual repository through the <tt>repo status</tt> command. Since this command is only retrieving information on a specific repository, the <tt>--id</tt> flag is required.
</p>
<pre class="wiki">$ pulp-admin repo status --id example
+------------------------------------------+
             Status for example
+------------------------------------------+
Repository: example
Number of Packages: 0
Last Sync: never
</pre><h4 id="Contents">Contents</h4>
<p>
The list of items in a repository can be displayed with the <tt>repo content</tt> command. Again, the <tt>--id</tt> flag is required to indicate the repository being queried.
</p>
<pre class="wiki">$ pulp-admin repo content --id pulp-f14-64
+------------------------------------------+
           Contents of pulp-f14-64
+------------------------------------------+

Packages in pulp-f14-64: 

python-pymongo-1.6-5.fc14.x86_64.rpm
pulp-client-0.0.117-1.fc14.noarch.rpm
grinder-0.0.67-1.fc14.noarch.rpm
gofer-lib-0.10-1.fc14.noarch.rpm
pulp-common-0.0.117-1.fc14.noarch.rpm
pulp-cds-0.0.117-1.fc14.noarch.rpm
pulp-0.0.117-1.fc14.noarch.rpm
python-webpy-0.32-6.fc14.noarch.rpm
gofer-0.10-1.fc14.noarch.rpm
python-qpid-0.7.946106-1.fc14.noarch.rpm

Errata in pulp-f14-64: 

 none

Files in pulp-f14-64: 

 none
</pre><h4 id="ListGPGKeys">List GPG Keys</h4>
<p>
The list of GPG keys associated with the repository can be obtained using the <tt>repo list_keys</tt> command.  Again, the <tt>--id</tt> flag is required to indicate the repository being queried.
</p>
<pre class="wiki">$ pulp-admin repo list_keys --id pulp-f14-64
+------------------------------------------+
   GPG keys associated with pulp-f14-64
+------------------------------------------+

RPM-GPG-KEY-fedora
</pre><hr />
<h2 id="sync">Synchronization</h2>
<p>
If a repository is configured with a feed, content can be downloaded from that feed into the Pulp server. This synchronization can occur either through a manual command in the <tt>pulp-admin</tt> script or configured to automatically run at a set time (for more information on scheduling repo synchronization, see the <a class="wiki" href="UGRepo.html#crud">repo creation</a> section of this guide). 
</p>
<p>
The simplest syntax for synchronizing a repository is as follows:
</p>
<pre class="wiki">$ pulp-admin repo sync --id pulp-f14-64
</pre><p>
By default, the sync runs asynchronously. In other words, the <tt>repo sync</tt> command will immediately return, however the actual download will proceed on the server. The status of the sync can be found with the <tt>repo status</tt> command:
</p>
<pre class="wiki">$ pulp-admin repo status --id pulp-f14-64
+------------------------------------------+
           Status for pulp-f14-64
+------------------------------------------+
Repository: pulp-f14-64
Number of Packages: 10
Last Sync: 2011-01-07 15:36:45.161000
Currently syncing: 50% done (5 of 10 packages downloaded)
</pre><p>
Alternatively, the sync can be run in the foreground by passing the <tt>-F</tt> flag to the sync call:
</p>
<pre class="wiki">$ pulp-admin repo sync --id pulp-f14-64 -F
Sync for repository pulp-f14-64 started
Step: Downloading Items or Verifying
[===                      ] 14%
Rpms: 4/15
Total: 4/15 items
</pre><p>
In addition to the <tt>-F</tt> flag, the following options are available to the <tt>repo sync</tt> call. These are only available when running a manual sync using <tt>pulp-admin repo sync</tt> and are not supported for scheduled sync jobs.
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> Show Schedule </td><td> <tt>--show-schedule</tt> </td><td> If specified, show the sync schedule and exit 
</td></tr><tr><td> Delete Schedule </td><td> <tt>--delete-schedule</tt> </td><td> If specified, remove the sync schedule and exit 
</td></tr><tr><td> Set Schedule Interval </td><td> <tt>--interval</tt> </td><td> If specified, schedule the sync, repeating on the given interval 
</td></tr><tr><td> Set Number of Runs </td><td> <tt>--runs</tt> </td><td> When used with <tt>--interval</tt>, limit the number of time the sync is repeated to the given number of runs 
</td></tr><tr><td> Set Start Time </td><td> <tt>--start</tt> </td><td> When used with <tt>--interval</tt>, delay the first scheduled sync until the given start time. The format follows the <a class="wiki" href="UGGeneral.html#timeunits">Time Units</a> guidelines. If omitted, the sync starts immediately. 
</td></tr><tr><td> Exclude Elements </td><td> <tt>--exclude</tt> </td><td> (cumulative) Exclude the element(s) specified from the sync. Valid elements are: <tt>packages</tt>, <tt>errata</tt>, and/or <tt>distribution</tt>. Note if packages is specified, but errata is not, the packages for the errata will still be synchronized. 
</td></tr><tr><td> Timeout </td><td> <tt>--timeout</tt> </td><td style="text-align: right"> Time for the sync to run before being timed out. The format follows the <a class="wiki" href="UGGeneral.html#timeunits">Time Units</a> guidelines.
</td></tr><tr><td> Limit Bandwidth Per Thread </td><td> <tt>--limit</tt> </td><td> If specified, will limit the bandwidth each thread uses when synchronizing yum content.  Value is expected to be in KB/sec. 
</td></tr><tr><td> Threads </td><td> <tt>--threads</tt> </td><td> If specified, will allow this many threads to be used for synchronization. 
</td></tr><tr><td> Sync in the Foreground </td><td> <tt>-F</tt> or <tt>--foreground</tt> </td><td> Report the sync progress on the command line. Conflicts with <tt>--start</tt> 
</td></tr></table>
<p>
A running sync for a repository can be cancelled using a <tt>repo cancel_sync</tt> command. 
</p>
<pre class="wiki">$ pulp-admin repo cancel_sync --id test-repo
Sync for repository test-repo is being canceled
</pre><p>
If you were running sync in foreground at this time, you will see a <tt>Canceled</tt> message. 
</p>
<pre class="wiki">$ pulp-admin repo sync --id test-repo -F
Sync for repository test-repo started
Sync: Canceled

Item Details: 
RPMs: 0/21
</pre><hr />
<h2 id="packages">Packages</h2>
<h3 id="AddPackage">Add Package</h3>
<p>
Packages can be associated with a repository using the <tt>pulp-admin</tt> script. When add_package is invoked, a package is selected from a source repository and added to the destination repository. During this process, a dependency lookup happens for the requested package(s) and the call provides a suggestive option to choose to any dependencies required by this call.
</p>
<p>
The <tt>repo add_package</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Target repository Id to add the package. 
</td></tr><tr><td> Package Name </td><td> <tt>-p</tt> or <tt>--package</tt> </td><td> Package filename to add to this repository. 
</td></tr><tr><td> Source ID </td><td> <tt>--source</tt> </td><td> Source repository with specified packages to perform add. 
</td></tr><tr><td> Assume Yes </td><td> <tt>-y</tt> or <tt>--assumeyes</tt> </td><td> Assume yes; automatically process dependencies as part of add operation. 
</td></tr><tr><td> Recursive  </td><td> <tt>-r</tt> or <tt>--recursive</tt> </td><td> Recursively lookup the dependency list; defaults to one level of lookup. 
</td></tr></table>
<h4 id="Example:Addapackagefromsourcetotargetrepositorytopleveldependencyresolution">Example: Add a package from source to target repository (top level dependency resolution)</h4>
<pre class="wiki">$ pulp-admin repo add_package --id=test17 --source=f13-updates -p lxc-libs-0.7.2-1.fc13.x86_64 
</pre><h4 id="Example:Addapackagefromsourcetotargetrepositoryrecursive">Example: Add a package from source to target repository (recursive)</h4>
<pre class="wiki">$ pulp-admin repo add_package --id=test17 --source=f13-updates -p lxc-libs-0.7.2-1.fc13.x86_64 -r
</pre><h3 id="RemovePackage">Remove Package</h3>
<p>
The <tt>repo remove_package</tt> command is used to indicate a package to remove from a Pulp repository. During this process, a dependency lookup happens for the requested package and the call provides a suggestive option to choose to any dependencies required by this call.
</p>
<p>
The <tt>repo remove_package</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Target repository Id to delete the package. 
</td></tr><tr><td> Package Name </td><td> <tt>-p</tt> or <tt>--package</tt> </td><td> Package filename to delete from this repository. 
</td></tr><tr><td> Assume Yes </td><td> <tt>-y</tt> or <tt>--assumeyes</tt> </td><td> Assume yes; automatically process dependencies as part of delete operation. 
</td></tr><tr><td> Recursive  </td><td> <tt>-r</tt> or <tt>--recursive</tt> </td><td> Recursively lookup the dependency list; defaults to one level of lookup. 
</td></tr></table>
<h4 id="Example:Removeapackagefromrepositorytopleveldependencyresolution">Example: Remove a package from repository (top level dependency resolution)</h4>
<pre class="wiki"> $ pulp-admin repo remove_package --id=test17 -p lxc-libs-0.7.2-1.fc13.x86_64
</pre><h4 id="Example:Removeapackagefromrepositoryrecursive">Example: Remove a package from repository (recursive)</h4>
<pre class="wiki"> $ pulp-admin repo remove_package --id=test17 -p lxc-libs-0.7.2-1.fc13.x86_64 -r
</pre><hr />
<h2 id="files">Files</h2>
<h3 id="AddFile">Add File</h3>
<p>
Files can be associated with a repository using the <tt>pulp-admin</tt> script. When add_file is invoked, a file is selected from a source repository (if specified) or from the Pulp server in general and added to the destination repository. Files can be specified with multiple -f or via --csv. Both options cannot be used in the same command.
</p>
<p>
The <tt>repo add_file</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the target repository to add files to. 
</td></tr><tr><td> Files </td><td> <tt>-f</tt> or <tt>--filename</tt> </td><td> File to add to this repository. 
</td></tr><tr><td> Source ID </td><td> <tt>--source</tt> </td><td> Source repository with specified file to perform add (optional). 
</td></tr><tr><td> CSV File </td><td> <tt>--csv</tt> </td><td> A csv file to perform batch operations on. Format: filename,checksum 
</td></tr></table>
<h4 id="Example:Addfilefromsourcetotargetrepository">Example: Add file from source to target repository</h4>
<pre class="wiki">$ pulp-admin repo add_file --id testrepo --source myfiles -f test.iso
</pre><h4 id="Example:Addanorphanedfiletotargetrepository">Example: Add an orphaned file to target repository</h4>
<pre class="wiki">$ pulp-admin repo add_file --id testrepo -f test.iso
</pre><h4 id="Example:Addabatchoffilestotargetrepository">Example: Add a batch of files to target repository</h4>
<pre class="wiki">$ pulp-admin repo add_file --id testrepo --csv test.csv
</pre><h3 id="DeleteFile">Delete File</h3>
<p>
The <tt>repo remove_file</tt> command is used to remove files from a repository. Files can be specified with multiple -f or via --csv. Both options cannot be used in the same command. It takes the following arguments: 
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the target repository to remove files from. 
</td></tr><tr><td> Files </td><td> <tt>-f</tt> or <tt>--filename</tt> </td><td> File to remove from this repository. 
</td></tr><tr><td> CSV File </td><td> <tt>--csv</tt> </td><td> A CSV file to perform batch operations on. Format: filename,checksum 
</td></tr></table>
<h4 id="Example:removefilefromtargetrepository">Example: remove file from target repository</h4>
<pre class="wiki">$ pulp-admin repo remove_file --id testrepo -f test.iso
</pre><h4 id="Example:removeabatchoffilestotargetrepository">Example: remove a batch of files to target repository</h4>
<pre class="wiki">$ pulp-admin repo remove_file --id testrepo --csv test.csv
</pre><hr />
<h2 id="cloning">Cloning</h2>
<p>
Repository cloning is a simple way to create a new repository seeded with content from an existing Pulp repository. 
</p>
<p>
For example, given a spacewalk repository on Pulp server, a clone of this repository can be created as follows:
</p>
<pre class="wiki">$ pulp-admin repo clone --id spacewalk --clone_id spacewalk-clone
</pre><p>
This command will have the same effect as -
</p>
<pre class="wiki">$ pulp-admin repo clone --id spacewalk --clone_id spacewalk-clone --feed parent
</pre><p>
In this case, the feed of the cloned repo will point to contents of parent repository on the pulp server. You can specify type of feed to be used for the cloned repository using --feed option. If --feed option is not specified, feed will default to parent as shown in the example above. 
</p>
<p>
There are two more types of repository clones: 
</p>
<h4 id="ClonewithOriginFeed">Clone with Origin Feed</h4>
<p>
In this case, the feed of the cloned repository will be the same as that of parent repository.  
</p>
<pre class="wiki"> $ pulp-admin repo clone --id spacewalk --clone_id spacewalk-clone-origin --feed origin -F
</pre><h4 id="ClonewithoutParentorOriginFeed">Clone without Parent or Origin Feed</h4>
<p>
This is also known as a <em>feedless</em> clone. In this case, the feed of the the cloned repository is 'None'.
</p>
<pre class="wiki">$ pulp-admin repo clone --id spacewalk --clone_id spacewalk-clone-feedless --feed none -F
</pre><p>
Note that in all of the above cases, immediately after the cloning operation is finished, both parent and clone have same content (packages, errata, distributions). In case of the default cloning with parent feed and cloning with origin feed, a sync operation can performed at any time on cloned repo using the <tt>repo sync</tt> command. In feedless clone, a sync cannot be performed but packages can be uploaded manually (see the <a class="wiki" href="UGPackages.html#upload">Packages - Upload</a> section for more information).
</p>
<p>
Depending upon the content of the origin repository, the cloning operation can take a long time. Similar to <tt>repo sync</tt>, the clone operation runs asynchronously by default.
</p>
<pre class="wiki">$ pulp-admin repo clone --id example --clone_id clone_example
Repository [example] is being cloned as [clone_example]
Use "repo status" to check on the progress
</pre><p>
The status of the clone can be viewed with the <tt>repo status</tt> command specifying the ID of the cloned repo. Alternatively, the clone operation can be run in the foreground by passing the <tt>-F</tt> flag. 
</p>
<pre class="wiki">$ pulp-admin repo clone --id example --clone_id clone_example -F
Repository [example] is being cloned as [clone_example]
You can safely CTRL+C this current command and it will continue
[==================================================] 100% (10 of 10 pkgs)
Clone: Finished
</pre><p>
A running clone of a repository can be cancelled using a <tt>repo cancel_clone</tt> command. 
</p>
<pre class="wiki">$ pulp-admin repo cancel_clone --id test-clone
Clone for this repository test-clone is being canceled
</pre><p>
If you were running clone in foreground at this time, you will see a <tt>Canceled</tt> message. 
</p>
<pre class="wiki">$ pulp-admin repo clone --id test-repo --clone_id test-clone -F
Repository [test-repo] is being cloned as [test-clone]
Clone: Canceled

Item Details: 
RPMs: 0/21
</pre><hr />
<h2 id="filters">Filters</h2>
<p>
Repository filters are ways of filtering the available content for repositories <strong>with local feed</strong>. 
</p>
<p>
Filters are of 2 types -
</p>
<ul><li>Blacklist filters - It contains a list of packages that should be omitted when syncing associated repository.
</li><li>Whitelist filters - In this case, only the packages matching a list of packages in whitelist filter should be synced from source. 
</li></ul><p>
A filter can be associated with multiple repositories and a repository can have multiple filters. If a repository has whitelist as well as blacklist filters associated with it, all the source packages matching whitelist filters are synced except for ones matching blacklist filters. 
</p>
<h3 id="CreationandUpdate">Creation and Update</h3>
<p>
Filters can be created using <tt>filter create</tt> command in the <tt>pulp-admin</tt> script. For example, to create a filter that filter out all openoffice.org packages and broadcom-wl-5.100.82.38-1.fc13.noarch package, the following command would be used:
</p>
<pre class="wiki">$ pulp-admin filter create --id=test-filter --type=blacklist --description="Openoffice and broad-wl filter" -p "openoffice.org*" -p "broadcom-wl-5.100.82.38-1.fc13.noarch" 
Successfully created filter [ test-filter ]
</pre><p>
Id and type are the required attributes, however, you do not have to provide packages at the time of creation. You can do so later by using "filter add_packages" and "filter remove_packages" commands. You can provide multiple packages as shown using multiple -p options. You can provide a package name, full NVRA or a regex as an argument to -p option. 
</p>
<pre class="wiki">$ pulp-admin filter create --id=pulp-whitelist-filter --type=whitelist
Successfully created filter [ pulp-whitelist-filter ]

$ pulp-admin filter add_packages --id=pulp-whitelist-filter -p "pulp*" -p "grinder"
Successfully added packages to filter [ pulp-whitelist-filter ]

$ pulp-admin filter remove_packages --id=pulp-whitelist-filter -p "grinder"
Successfully removed packages to filter [ pulp-whitelist-filter ]
</pre><h3 id="ListandInfo">List and Info</h3>
<p>
All repo filters can be listed using "filter list" and individual filter information is available through "filter info".
</p>
<pre class="wiki">$ sudo pulp-admin filter list
+------------------------------------------+
              Available Filters
+------------------------------------------+

Id           :               	test-filter              
Description  :               	Openoffice and broad-wl filter
Type         :               	blacklist                
Package List :               	[u'openoffice.org*', u'broadcom-wl-5.100.82.38-1.fc13.noarch']


Id           :               	pulp-whitelist-filter    
Description  :               	pulp-whitelist-filter    
Type         :               	whitelist                
Package List :               	[u'pulp*']               
</pre><pre class="wiki">$ sudo pulp-admin filter info --id=test-filter

Id           :               	test-filter              
Description  :               	Openoffice and broad-wl filter
Type         :               	blacklist                
Package List :               	[u'openoffice.org*', u'broadcom-wl-5.100.82.38-1.fc13.noarch']
</pre><h3 id="Delete">Delete</h3>
<p>
A filter can be deleted using "filter delete". If a filter is associated with any repositories, all associations are deleted along with filter.
</p>
<pre class="wiki">$ pulp-admin filter delete --id=test-filter
Successfully deleted Filter [ test-filter ]
</pre><h3 id="AssociationwithRepositories">Association with Repositories</h3>
<p>
There are two ways in which you can associate filters with repositories:
</p>
<ul><li>Filters applied during cloning a repository: You can specify one or more filters while cloning a repo. As a result of this, cloned respository is associated with these filters and they are applied during cloning operation. 
</li></ul><pre class="wiki">$ pulp-admin repo clone --id=test-repo --clone_id=clone-test-repo -f filter1 -f filter2
</pre><p>
Multiple filters can be specified using multiple -f options. You can verify packages synced using "repo content" to make sure filters were applied successfully. Note that this will not work with repo clone with "origin" feed as filters work only with repositories with "local" feed. 
</p>
<p>
Successive syncs with continue to apply filters associated with repository unless you remove them using "repo remove_filters" command as shown- 
</p>
<pre class="wiki">$ pulp-admin repo remove_filters --id=clone-test-repo -f filter1
Successfully removed filters ['filter1'] from repository [clone-test-repo]
</pre><ul><li>Filters added manually to a repository using "repo add_filters" command. 
</li></ul><pre class="wiki">$ pulp-admin repo add_filters --id=clone-test-repo -f filter1 -f filter2
Successfully added filters ['filter1','filter2'] to repository [clone-test-repo]
</pre><hr />
<h2 id="publish">Publish</h2>
<p>
The ability to control if a repository is accessible from HTTPS requests may be set through the <tt>repo publish</tt> command.
</p>
<ul><li>Pulp's default behavior for repository publishing is set in <tt>pulp.conf</tt>
<pre class="wiki">[repos]
default_to_published: true
</pre><ul><li>If <tt>default_to_published</tt> is true, all repositories will be published and accessible through HTTPS.  It is still possible to restrict a specific repository, through use of the 'repo publish --disable' command.
</li><li>If <tt>default_to_published</tt> is false, all repositories will be hidden from HTTPS and not published.  A user would need to run 'repo publish --enable' to allow HTTPS access for a specific repository.
</li></ul></li></ul><ul><li>Example to publish the repository, making it accessible from the Pulp server and CDS instances
<pre class="wiki">$ pulp-admin repo publish --id test-repo --enable
</pre></li></ul><ul><li>Example to disable publishing a repository
<pre class="wiki">$ pulp-admin repo publish --id test-repo --disable
</pre></li></ul><hr />
<h2 id="discovery">Discovery</h2>
<p>
Perform repo discovery for a specified url and type. This command will wait for the discovery to complete and prompt the user to select which repositories to import.
</p>
<p>
The <tt>repo discovery</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> URL </td><td> <tt>-u</tt> or <tt>--url</tt> </td><td> Base URL to perform discovery (required). Supports http, https and file based urls(path should be accessible by apache) 
</td></tr><tr><td> TYPE </td><td> <tt>-t</tt> or <tt>--type</tt> </td><td>  Content type to look for during discovery (required); supported types: 'yum' 
</td></tr><tr><td> ASSUMEYES </td><td> <tt>-y</tt> or <tt>--assumeyes</tt> </td><td> Assume yes; automatically create Pulp repositories for discovered repositories (optional). 
</td></tr><tr><td> GROUPID   </td><td> <tt>-g</tt> or <tt>--groupid</tt>   </td><td> Group IDs (one or more) to associate the discovered repos (optional). 
</td></tr><tr><td> CA Certificate </td><td> <tt>--ca</tt> </td><td> If the feed uses an HTTPS connection, this indicates the CA certificate used to verify the server's SSL certificate. The certificate will be uploaded to the Pulp server and used when synchronizing the repository. 
</td></tr><tr><td> Entitlement Certificate </td><td> <tt>--cert</tt> </td><td> If the feed uses an HTTPS connection and requires an entitlement certificate for authentication, this indicates the certificate and key combined to use. The certificate pem will be uploaded to the Pulp server and used when synchronizing the repository. 
</td></tr></table>
<h4 id="Example:performarepodiscoveryinteractively">Example: perform a repo discovery interactively</h4>
<pre class="wiki">$ sudo pulp-admin repo discovery -u http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/ -t yum
Discovering urls with yum metadata, This could take some time...
Waiting -
+------------------------------------------+
 Repository Urls discovered @ [http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/]
+------------------------------------------+
(-)  [1] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo_smaller/
(-)  [2] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo/

Select urls for which candidate repos should be created (h for help):h
  'a'   	 : select all
  'x:y' 	 : select a range eg:1:3
  &lt;sel&gt; 	 : select value between 1 and 2
  'y'   	 : confirm selection
  'c'   	 : clear selections
  'q'   	 : abort the repo creation
Select urls for which candidate repos should be created (h for help):1:2
(+)  [1] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo_smaller/
(+)  [2] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo/

Select urls for which candidate repos should be created (h for help):y

Creating candidate repos for selected urls..
Successfully created repo [repos-pulp-pulp-demo_repos-test_bandwidth_repo_smaller]
Successfully created repo [repos-pulp-pulp-demo_repos-test_bandwidth_repo]
</pre><h4 id="Example:performrepodiscoverynon-interactively">Example: perform repo discovery non-interactively</h4>
<pre class="wiki">$ sudo pulp-admin repo discovery -u http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/ -t yum -y
Discovering urls with yum metadata, This could take some time...
Waiting \
+------------------------------------------+
 Repository Urls discovered @ [http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/]
+------------------------------------------+
(+)  [1] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo_smaller/
(+)  [2] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo/

Creating candidate repos for selected urls..
Successfully created repo [repos-pulp-pulp-demo_repos-test_bandwidth_repo_smaller]
Successfully created repo [repos-pulp-pulp-demo_repos-test_bandwidth_repo]

</pre><h4 id="Example:performrepodiscoveryonauthenticatedrepos">Example: perform repo discovery on authenticated repos</h4>
<pre class="wiki">sudo pulp-admin repo discovery --url=https://&lt;hostname&gt;/content/dist/rhel/rhui/server-6/releases/6Server/x86_64/ --ca=/certs/ca.crt --cert=/certs/cert.pem --type=yum
Discovering urls with yum metadata, This could take some time...
Number of Urls Discovered: 4
+------------------------------------------+
 Repository Urls discovered @ [https://&lt;hostname&gt;/content/dist/rhel/rhui/server-6/releases/6Server/x86_64/]
+------------------------------------------+
(-)  [1] https://&lt;hostname&gt;/dist/rhel/rhui/server-6/releases/6Server/x86_64/source/SRPMS
(-)  [2] https://&lt;hostname&gt;/content/dist/rhel/rhui/server-6/releases/6Server/x86_64/scalablefilesystem/os
(-)  [3] https://&lt;hostname&gt;/content/dist/rhel/rhui/server-6/releases/6Server/x86_64/resilientstorage/os
(-)  [4] https://&lt;hostname&gt;/content/dist/rhel/rhui/server-6/releases/6Server/x86_64/os/Server

Select urls for which candidate repos should be created (h for help):
</pre><hr />
<h2 id="GenerateMetadata">Generate Metadata</h2>
<p>
Schedules metadata generation for a specific repository. This creates an asynchronous task and queues it. The status for this task can be checked with a status flag.
</p>
<p>
The <tt>repo generate_metadata</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the repository to generate metadata. 
</td></tr><tr><td> Status </td><td> <tt>--status</tt> </td><td> Metadata generation status for this repository. 
</td></tr></table>
<h4 id="Example:scheduleametadatagenerationforarepository">Example: schedule a metadata generation for a repository</h4>
<pre class="wiki">$ pulp-admin repo generate_metadata --id testrepo
</pre><h4 id="Example:checkthemetadataschedulestatusforarepository">Example: check the metadata schedule status for a repository</h4>
<pre class="wiki">$ pulp-admin repo generate_metadata --id testrepo --status
</pre><hr />
<h2 id="AddMetadata">Add Metadata</h2>
<p>
Add custom filetypes for a specific repository metadata. This integrates the custom data to existing metadata.
</p>
<p>
The <tt>repo add_metadata</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the repository to add metadata. 
</td></tr><tr><td> MDTYPE </td><td> <tt>--mdtype</tt> </td><td> metadata type to add to the repository metadata 
</td></tr><tr><td> PATH </td><td> <tt>--path</tt> </td><td> path to the metadata file to be added  
</td></tr></table>
<h4 id="Example:Addacustomfiletypetorepositorymetadata">Example: Add a custom file type to repository metadata</h4>
<pre class="wiki">  $ pulp-admin repo add_metadata --id=test_metadata --mdtype=product --path=/data/product.gz 
</pre><hr />
<h2 id="ListMetadata">List Metadata</h2>
<p>
List all filetypes information  in specific repository metadata.
</p>
<p>
The <tt>repo list_metadata</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the repository to list metadata. 
</td></tr></table>
<h4 id="Example:Listrepositorymetadata">Example: List repository metadata</h4>
<pre class="wiki">  $ pulp-admin repo list_metadata --id=test_metadata
</pre><hr />
<h2 id="DownloadMetadata">Download Metadata</h2>
<p>
Download a specific filetype from existing repository metadata.
</p>
<p>
The <tt>repo download_metadata</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the repository from which to download metadata. 
</td></tr><tr><td> MDTYPE </td><td> <tt>--mdtype</tt> </td><td> metadata type to download from repository 
</td></tr><tr><td> OUT </td><td> <tt>--out</tt> </td><td> output file to store the exported metadata file (optional); default is stdout 
</td></tr></table>
<h4 id="Example:Downloadrepositorymetadata">Example: Download repository metadata</h4>
<pre class="wiki">  $ sudo pulp-admin repo download_metadata --id=test_metadata --mdtype=product --out=product.gz
</pre><hr />
<h2 id="RemoveMetadata">Remove Metadata</h2>
<p>
Remove a specific filetype from existing repository metadata.
</p>
<p>
The <tt>repo remove_metadata</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the repository from which to remove metadata. 
</td></tr><tr><td> MDTYPE </td><td> <tt>--mdtype</tt> </td><td> metadata type to remove from repository 
</td></tr></table>
<h4 id="Example:Removeproductmetadatatypefromarepository">Example: Remove 'product' metadata type from a repository</h4>
<pre class="wiki">  $ sudo pulp-admin repo remove_metadata --id=test_metadata --mdtype=product
</pre><hr />
<h2 id="repogroup">Group Operations</h2>
<h3 id="update">update</h3>
<p>
All repositories belonging to a group may be updated through the "repogroup update" command in the <tt>pulp-admin</tt> script. For example, to update all repositories belonging to test-group, following commands can be used: 
</p>
<pre class="wiki">$ sudo pulp-admin repogroup update --id=test-group --feed_cert=/tmp/test-cert --feed_key=/tmp/test-key 
Successfully updated repositories belonging to group[ test-group ]

$ sudo pulp-admin repogroup update --id=test-group --addkeys=/tmp/RPM-GPG-KEY-test 
uploading /tmp/RPM-GPG-KEY-test
Successfully updated repositories belonging to group[ test-group ]

$ sudo pulp-admin repogroup update --id=test-group --interval=P1DT1H5M 
Successfully updated repositories belonging to group[ test-group ] except for the following repositories: 

[ repo3 ]
PulpException: 'Cannot add schedule to repository with out sync source'

</pre><p>
The following attributes can be updated (all attributes are optional unless otherwise specified).
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Required. Identifies the repository group to be updated. 
</td></tr><tr><td> Architecture </td><td> <tt>--arch</tt> </td><td> Change the architecture of packages that will be found in repos belonging to the group. 
</td></tr><tr><td> Schedule Interval </td><td> <tt>--interval</tt> </td><td> Time between scheduled syncs in <a class="wiki" href="https://fedorahosted.org/pulp/wiki/RepoSyncScheduling">iso8601</a> format 
</td></tr><tr><td> Schedule Start </td><td> <tt>--start</tt> </td><td> Date and time of first scheduled sync in <a class="wiki" href="https://fedorahosted.org/pulp/wiki/RepoSyncScheduling">iso8601</a> format (optional: not specified means to run immediately) 
</td></tr><tr><td> Schedule Runs </td><td> <tt>--runs</tt> </td><td> Total scheduled syncs (optional: not specified means run indefinitely) 
</td></tr><tr><td> Delete Schedule </td><td> <tt>--delete-schedule</tt> </td><td> Delete an existing schedule for all repos belonging to the group 
</td></tr><tr><td> Feed CA Certificate </td><td> <tt>--feed_ca</tt> </td><td> If the feed uses an HTTPS connection, this indicates the CA certificate used to verify the server's SSL certificate. The certificate will be uploaded to the Pulp server and used when synchronizing all repositories in this group. 
</td></tr><tr><td> Feed Entitlement Certificate </td><td> <tt>--feed_cert</tt> </td><td> If the feed uses an HTTPS connection and requires an entitlement certificate for authentication, this indicates the certificate to use. The certificate will be uploaded to the Pulp server and used when synchronizing repositories in this group.  The file may contain both the private key as well as the certificate in which case the --feed_key is not necessary. 
</td></tr><tr><td> Feed Entitlement Private Key </td><td> <tt>--feed_key</tt> </td><td> When using an entitlement certificate, this indicates the certificate's associated private key. 
</td></tr><tr><td> Remove Feed Entitlement Certificate </td><td> <tt>--remove_feed_cert</tt> </td><td> Removes any feed HTTPS data, including the CA certificate, entitlement certificate and its private key. This cannot be specified at the same time as any of the <tt>--feed_*</tt> attributes. 
</td></tr><tr><td> Consumer CA Certificate </td><td> <tt>--consumer_ca</tt> </td><td> See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> 
</td></tr><tr><td> Consumer Entitlement Certificate </td><td> <tt>--consumer_cert</tt> </td><td> See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> 
</td></tr><tr><td> Consumer Entitlement Private Key </td><td> <tt>--consumer_key</tt> </td><td> See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> 
</td></tr><tr><td> Remove Consumer Entitlement Certificate </td><td> <tt>--remove_consumer_cert</tt> </td><td> Disable repository authentication from all repositories in this group. For more information, see <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a>. 
</td></tr><tr><td> Add GPG keys </td><td> <tt>--addkeys</tt> </td><td> A comma-separated list of GPG public key files to be added. 
</td></tr><tr><td> Remove GPG keys </td><td> <tt>--rmkeys</tt> </td><td> A comma-separated list of GPG public key files to be removed. 
</td></tr></table>
<hr />
<h2 id="export">Export</h2>
<p>
Exports repository content to a target location. Optionally the exported content can be wrapped into iso images.
</p>
<p>
The <tt>repo export</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> repository Id to export. 
</td></tr><tr><td> Target Directory </td><td> <tt>-t</tt> or <tt>--target_dir</tt> </td><td> target location on server to write the exported content 
</td></tr><tr><td> Generate ISO </td><td> <tt>--generate-isos</tt> </td><td> wrap exported content into iso images (optional). 
</td></tr><tr><td> Overwrite </td><td>  <tt>--overwrite</tt> </td><td> overwrite existing content in target location (optional). 
</td></tr></table>
<h4 id="Example:Exportarepositorytoatargetlocationonserver">Example: Export a repository to a target location on server</h4>
<pre class="wiki"> $ pulp-admin repo export --id=&lt;repoid&gt; --target_dir /data/myrepo/
</pre><h4 id="Example:Exportarepositoryandgenerateisos">Example: Export a repository and generate isos</h4>
<pre class="wiki"> $ pulp-admin repo export --id=&lt;repoid&gt; --target_dir /data/myrepo/ --generate-iso
</pre><h4 id="Example:Exportarepositoryandgenerateisostoanexistingtargetdirectory">Example: Export a repository and generate isos to an existing target directory</h4>
<pre class="wiki"> $ pulp-admin repo export --id=&lt;repoid&gt; --target_dir /data/myrepo/ --generate-iso --overwrite
</pre><hr />
<h2 id="distributions">Distributions</h2>
<h3 id="AddDistribution">Add Distribution</h3>
<p>
Distributions can be associated with a repository using the <tt>pulp-admin</tt> script. When add_distribution is invoked, a distribution is selected from a source repository (if specified) or from the Pulp server in general and added to the destination repository. The distribution tree is symlinked to the repo location when add operation is performed.
The <tt>repo add_distribution</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the target repository to add distributions. 
</td></tr><tr><td> DistributionID </td><td> <tt>-d</tt> or <tt>--distributionid</tt> </td><td> distribution to associate to this repository. 
</td></tr><tr><td> Source ID </td><td> <tt>--source</tt> </td><td> Source repository with specified distribution to perform add (optional). 
</td></tr></table>
<h4 id="Example:Adddistributionfromsourcetotargetrepository">Example: Add distribution from source to target repository</h4>
<pre class="wiki">$ pulp-admin repo add_distribution --id testrepo --source mydistrepo -d ks-fedora-14-i386
</pre><h4 id="Example:Addadistributiontotargetrepository">Example: Add a distribution to target repository</h4>
<pre class="wiki">$ pulp-admin repo add_distribution --id testrepo -d ks-fedora-14-i386
</pre><h3 id="RemoveDistribution">Remove Distribution</h3>
<p>
The <tt>repo remove_distribution</tt> command is used to remove distributions from a repository.  The distribution tree files are unlinked from repo location. The distribution is not removed from pulp server if it has any references. It takes the following arguments: 
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the target repository to remove distributions. 
</td></tr><tr><td> DistributionID </td><td> <tt>-d</tt> or <tt>--distributionid</tt> </td><td> distribution to remove from this repository. 
</td></tr></table>
<h4 id="Example:removedistributionfromtargetrepository">Example: remove distribution from target repository</h4>
<pre class="wiki">$ pulp-admin repo remove_distribution --id testrepo -d ks-fedora-14-i386
</pre><hr />
<h2 id="notes">Repository Notes</h2>
<p>
Pulp provides the ability to create custom attributes for repositories using notes. These are similar to key-value attributes for consumers. 
</p>
<h3 id="CreationDeletionUpdate">Creation, Deletion, Update</h3>
<p>
For example, take a scenario where multiple repositories in Pulp server need to be grouped together as blacklisted repositories. You can add blacklisted: True to notes of these repositories.
</p>
<pre class="wiki">$ pulp-admin repo add_note  --id test1 --key key1 --value value1
Successfully added key-value pair key1:value1
</pre><p>
Attributes can be updated or deleted as follows:
</p>
<pre class="wiki">$ pulp-admin repo update_note --id test1 --key key1 --value value2
Successfully updated key-value pair key1:value2

$ pulp-admin repo delete_note --id test1  --key key1
Successfully deleted key: key1
</pre><h3 id="List">List</h3>
<p>
Repository listing will show notes added to each repository: 
</p>
<pre class="wiki">$ pulp-admin repo list
+------------------------------------------+
       List of Available Repositories
+------------------------------------------+

Id                 	test1                    
Name               	test1                    
Repo URL           	https://sunflower/pulp/repos/test1/
Feed URL           	None                     
Feed Type          	None                     
Content Type       	yum                      
Feed Certs         	CA:No   Cert:No
Consumer Certs     	CA:No   Cert:No
Architecture       	noarch                   
Sync Schedule      	None                     
Packages           	0                        
Files              	0                        
Distributions      	None                     
Publish            	True                     
Clones             	[]                       
Groups             	None                     
Filters            	[]                       
Notes              	{'key1': 'value1'}       
Preserve Metadata  	False               


Id                 	test2                    
Name               	test2                    
Repo URL           	https://sunflower/pulp/repos/test2/
Feed URL           	None                     
Feed Type          	None                     
Content Type       	yum                      
Feed Certs         	CA:No   Cert:No
Consumer Certs     	CA:No   Cert:No
Architecture       	noarch                   
Sync Schedule      	None                     
Packages           	0                        
Files              	0                        
Distributions      	None                     
Publish            	True                     
Clones             	[]                       
Groups             	None                     
Filters            	[]                       
Notes              	{'key2': 'value2'}       
Preserve Metadata  	False           
</pre><p>
In addition, you can also filter repositories based on a note:
</p>
<pre class="wiki">
$ sudo pulp-admin repo list --note key1:value1
+------------------------------------------+
       List of Available Repositories
+------------------------------------------+

Id                 	test1                    
Name               	test1                    
Repo URL           	https://sunflower/pulp/repos/test1/
Feed URL           	None                     
Feed Type          	None                     
Content Type       	yum                      
Feed Certs         	CA:No   Cert:No
Consumer Certs     	CA:No   Cert:No
Architecture       	noarch                   
Sync Schedule      	None                     
Packages           	0                        
Files              	0                        
Distributions      	None                     
Publish            	True                     
Clones             	[]                       
Groups             	None                     
Filters            	[]                       
Notes              	{'key1': 'value1'}       
Preserve Metadata  	False              
</pre><hr />
</div>
        
        
      </div>
      

    </div>
    
<!-- BEGIN FOOTER -->
</body>
</html>

